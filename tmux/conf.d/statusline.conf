#!/usr/bin/env -S tmux set-option -g

### ======================
### 状态栏全局设置
### ======================

# 状态栏刷新间隔（秒）
set -g status-interval 15

# 状态栏位置（顶部）
set -g status-position top

# 状态栏样式
set -g status-style "fg=#bdae93,bg=#1d2021"
set -g status-left-length 100
set -g status-right-length 150

### ======================
### 状态栏左侧组件
### ======================

# 会话名称（加粗显示）
set -g status-left "#[bold]#{?client_prefix,#[fg=yellow],#[fg=#d79921}]#[fg=#1d2021,bg=#d79921]#S #[fg=#d79921,bg=#1d2021] "

# 窗口列表（带活动指示）
set -g window-status-format " #[fg=#bdae93]#I: #W "
set -g window-status-current-format "#[fg=#1d2021,bg=#d79921]#[fg=#1d2021,bold]#I: #W #[fg=#d79921,bg=#1d2021]"
set -g window-status-separator ""

### ======================
### 状态栏右侧组件
### ======================

# 键盘布局指示器
set -g @layout_icon_qwerty "◧"
set -g @layout_icon_colemak "◨"
set -g @layout_color_qwerty "#689d6a"
set -g @layout_color_colemak "#d3869b"

# 自定义状态变量
set -g @battery_script "#{TMUX_CONF_DIR}/scripts/battery.sh"
set -g @network_script "#{TMUX_CONF_DIR}/scripts/network.sh"

# 状态栏右侧组件（从右到左）
set -g status-right "#[fg=#1d2021,bg=#d79921]#[fg=#1d2021]%H:%M #[fg=#d79921,bg=#1d2021]"
set -ga status-right "#[fg=#1d2021,bg=#a89984]#[fg=#1d2021]%a %b %d #[fg=#a89984,bg=#1d2021]"
set -ga status-right "#(bash #{@network_script})"
set -ga status-right "#(bash #{@battery_script})"
set -ga status-right "#{?#{==:#{@keyboard_layout},qwerty},#[fg=#{@layout_color_qwerty}]#{@layout_icon_qwerty} QWERTY,}"
set -ga status-right "#{?#{==:#{@keyboard_layout},colemak},#[fg=#{@layout_color_colemak}]#{@layout_icon_colemak} COLEMAK,}"
set -ga status-right "#[fg=#1d2021,bg=#458588]#[fg=#1d2021]#h #[fg=#458588,bg=#1d2021]"

### ======================
### 状态栏中间组件
### ======================

# 当前窗格信息（运行命令/路径）
set -g status-justify centre
set -g window-status-current-format "#[fg=#1d2021,bg=#d79921]#[fg=#1d2021,bold]#I: #W #[fg=#d79921,bg=#1d2021]"
set -g window-status-format "#[fg=#bdae93]#I: #W "

### ======================
### 状态栏样式组件
### ======================

# 消息样式
set -g message-style "fg=#1d2021,bg=#d79921"

# 窗格分隔线样式
set -g pane-border-style "fg=#665c54"
set -g pane-active-border-style "fg=#d79921"

# 状态栏分隔符
set -g @status_separator "#[fg=#665c54]│"
