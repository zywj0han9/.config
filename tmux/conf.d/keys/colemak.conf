#!/usr/bin/env -S tmux set-option -g
# conf.d/keys/colemak.conf

### ======================
### Colemak 物理位置映射
### 核心原则：保持物理键位一致性
### ======================

### 窗格导航 (物理位置 = QWERTY 的 HJKL)
bind -n C-n select-pane -L  # 向左移动 (物理位置 = H)
bind -n C-e select-pane -D  # 向下移动 (物理位置 = J)
bind -n C-u select-pane -U  # 向上移动 (物理位置 = K)
bind -n C-i select-pane -R  # 向右移动 (物理位置 = L)

### 窗口导航
bind -n M-n previous-window  # 上一个窗口 (物理位置 = H)
bind -n M-i next-window      # 下一个窗口 (物理位置 = L)

### 窗格分割 (基于物理位置)
bind | split-window -h -c "#{pane_current_path}"  # 垂直分割 (物理位置 = \)
bind - split-window -v -c "#{pane_current_path}"  # 水平分割 (物理位置 = -)

### 窗格调整大小 (物理方向键)
bind -r N resize-pane -L 5  # 向左调整 (物理位置 = H)
bind -r E resize-pane -D 5  # 向下调整 (物理位置 = J)
bind -r U resize-pane -U 5  # 向上调整 (物理位置 = K)
bind -r I resize-pane -R 5  # 向右调整 (物理位置 = L)

### ======================
### 工作流优化按键
### ======================

# 快速窗格最大化切换 (物理位置 = m)
bind m resize-pane -Z

# 布局切换 (Alt+Shift+L 已在主配置中定义)
bind -n M-S-l run "~/.tmux/scripts/switch-layout.sh"

# 会话管理 (基于 Colemak 位置)
bind C-f command-prompt -p "查找会话:" "switch-client -t '%%'"

### ======================
### 插件集成按键
### ======================

# tmux-resurrect (会话保存/恢复)
bind S run-shell '~/.tmux/plugins/tmux-resurrect/scripts/save.sh'
bind R run-shell '~/.tmux/plugins/tmux-resurrect/scripts/restore.sh'

# tmux-fzf (模糊搜索)
bind C-p run-shell -b "~/.tmux/plugins/tmux-fzf/scripts/session.sh"

### ======================
### 模式特定映射
### ======================

# 复制模式 (使用物理方向键)
bind -T copy-mode-vi n send -X cursor-left
bind -T copy-mode-vi e send -X cursor-down
bind -T copy-mode-vi i send -X cursor-up
bind -T copy-mode-vi u send -X cursor-right

# 复制模式翻页
bind -T copy-mode-vi C-n send -X halfpage-up
bind -T copy-mode-vi C-u send -X halfpage-down

### ======================
### 帮助系统
### ======================

# 显示 Colemak 快捷键帮助
bind C-h display-popup -E "echo 'Colemak 导航:'
echo '  ↑: C-u   ↓: C-e   ←: C-n   →: C-i'
echo '窗格调整:'
echo '  ←: C-N   ↓: C-E   ↑: C-U   →: C-I'
echo '窗口操作:'
echo '  ←窗: M-n  →窗: M-i 最大窗: m'
echo '分割: |(垂直)  -(水平)'
echo '布局切换: Alt+Shift+L'
sleep 5"

### ======================
### 兼容性说明
### ======================
# 此配置设计原则：
# 1. 所有方向键基于物理位置而非字母
# 2. 前缀键 (Ctrl-b) 后使用相同物理位置
# 3. 避免与 Colemak 特殊字符冲突
# 4. 保持与 QWERTY 配置相同的操作逻辑
