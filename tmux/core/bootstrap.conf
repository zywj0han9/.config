# 系统引导和模块加载 (自动检测平台)
set -g @config_root "~/.config/tmux"
run-shell 'uname | grep -q "Darwin" && tmux set -g @platform "macos" || tmux set -g @platform "linux"'
run-shell 'tmux set -g @tmux_version "$(tmux -V | cut -d" " -f2)"'

# 环境与平台
source-file ~/.config/tmux/environment/variables.conf
source-file ~/.config/tmux/environment/paths.conf
if-shell '[ "#{@platform}" = "macos" ]'   'source-file ~/.config/tmux/environment/platform/macos.conf'   'source-file ~/.config/tmux/environment/platform/linux.conf'

# 核心配置
source-file ~/.config/tmux/core/server.conf
source-file ~/.config/tmux/core/session.conf

# 输入&键位
source-file ~/.config/tmux/input/prefix.conf
source-file ~/.config/tmux/input/colemak/navigation.conf
source-file ~/.config/tmux/input/colemak/window-management.conf
source-file ~/.config/tmux/input/colemak/pane-management.conf
source-file ~/.config/tmux/input/colemak/shortcuts.conf
source-file ~/.config/tmux/input/bindings/system.conf
source-file ~/.config/tmux/input/bindings/custom.conf

# 界面
source-file ~/.config/tmux/interface/colors/dark-theme.conf
source-file ~/.config/tmux/interface/status-bar/left.conf
source-file ~/.config/tmux/interface/status-bar/right.conf
source-file ~/.config/tmux/interface/status-bar/window-status.conf
source-file ~/.config/tmux/interface/borders/pane-borders.conf
source-file ~/.config/tmux/interface/borders/window-borders.conf

# 模式
source-file ~/.config/tmux/modes/copy-mode/navigation.conf
source-file ~/.config/tmux/modes/copy-mode/selection.conf
source-file ~/.config/tmux/modes/copy-mode/search.conf
source-file ~/.config/tmux/modes/copy-mode/clipboard.conf
source-file ~/.config/tmux/modes/command-mode/history.conf

# 硬件
source-file ~/.config/tmux/hardware/mouse/basic-mouse.conf
source-file ~/.config/tmux/hardware/mouse/drag-drop.conf
source-file ~/.config/tmux/hardware/mouse/scroll.conf
source-file ~/.config/tmux/hardware/mouse/selection.conf
source-file ~/.config/tmux/hardware/terminal/256color.conf
source-file ~/.config/tmux/hardware/terminal/true-color.conf

# 扩展
source-file ~/.config/tmux/extensions/plugins/tpm.conf
source-file ~/.config/tmux/extensions/plugins/resurrect.conf
source-file ~/.config/tmux/extensions/plugins/continuum.conf
source-file ~/.config/tmux/extensions/scripts/startup.conf
source-file ~/.config/tmux/extensions/scripts/utilities.conf

# 使用场景 (可选)
if-shell '[ -f ~/.config/tmux/profiles/development.conf ]'   'source-file ~/.config/tmux/profiles/development.conf'
if-shell '[ -f ~/.config/tmux/profiles/minimal.conf ]'   'source-file ~/.config/tmux/profiles/minimal.conf'
if-shell '[ -f ~/.config/tmux/profiles/presentation.conf ]'   'source-file ~/.config/tmux/profiles/presentation.conf'
