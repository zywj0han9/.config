#######################################################################
# apps/browsers.conf
# 作用：仅管理“浏览器相关”的窗口行为（不写显示器、不强绑工作区）
# 生效：hyprctl reload
#######################################################################

###########
# 变量预设 #
###########
# 主流浏览器类名（Wayland/XWayland 下常见 WM_CLASS / app_id）
$BROWSERS = class:^(google-chrome|chromium|brave-browser|microsoft-edge)$
$FIREFOX  = class:^(firefox)$

########################################
# 1) 画中画（Picture-in-Picture, PiP） #
########################################
# 目标：让 PiP 自动浮动、保持宽高比、尺寸适中；不影响主布局
# 说明：Chromium/Firefox 的 PiP 标题通常包含 “Picture-in-Picture”
windowrulev2 = float,            title:^(?i)picture[- ]?in[- ]?picture$
windowrulev2 = keepaspectratio,  title:^(?i)picture[- ]?in[- ]?picture$
windowrulev2 = size 480 270,     title:^(?i)picture[- ]?in[- ]?picture$
# 可选：把 PiP 固定在所有工作区可见（像系统小窗），需要时放开下一行
# windowrulev2 = pin,           title:^(?i)picture[- ]?in[- ]?picture$
# 可选：居中或轻微偏移（居中更通用；若想右下角请用 99-local.conf 定位）
windowrulev2 = center,           title:^(?i)picture[- ]?in[- ]?picture$
# 可选：取消动画，避免频繁呼出时闪动
windowrulev2 = noanim,           title:^(?i)picture[- ]?in[- ]?picture$

#####################################
# 2) 浏览器“开发者工具”窗口的处理 #
#####################################
# 说明：DevTools 有时会独立为窗口；这里选择浮动 + 保持比例
windowrulev2 = float,           $BROWSERS, title:^(?i).*dev.?tools?.*$
windowrulev2 = float,           $FIREFOX,  title:^(?i).*developer tools?.*$
windowrulev2 = keepaspectratio, title:^(?i).*dev.?tools?.*$

##########################################
# 3) 文件选择/权限对话框（portal/chooser） #
##########################################
# 说明：避免“打开/保存/选文件”这类临时窗把布局挤乱
# xdg-desktop-portal-gtk 是常见 portal 对话框的类名
windowrulev2 = float,  class:^(xdg-desktop-portal-gtk)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = noanim, class:^(xdg-desktop-portal-gtk)$

#################################################
# 4) （可选）浏览器统一行为微调（默认注释掉）   #
#################################################
# 让新开的浏览器窗口默认平铺（通常已是默认，此处示例）
# windowrulev2 = tile, $BROWSERS
# windowrulev2 = tile, $FIREFOX
