#######################################################################
# apps/media.conf
# 作用：统一管理媒体相关应用（视频/音乐/图片/录屏截图/音频工具）
# 原则：不绑显示器、不固定工作区；主窗平铺，小窗浮动 + 居中 + 保比例
# 生效：hyprctl reload
#######################################################################

############################
# 0) 常见类名集合（按需补充）
############################
# 视频播放器
$PLAYERS = class:^(vlc|mpv|Celluloid|celluloid|smplayer|MPlayer|gnome-mpv)$

# 音乐播放器
$MUSIC = class:^(Spotify|spotify|Rhythmbox|rhythmbox|Lollypop|lollypop|DeaDBeeF|deadbeef|Audacious|audacious|Strawberry|strawberry)$

# 图片查看器（默认将其视作“临时查看”而非主窗）
$IMG_VIEW = class:^(imv|feh|gthumb|eog|gwenview|nomacs|qimgv)$

# 录屏/直播/截图
$OBS = class:^(obs|OBS|com\.obsproject\.Studio)$
$SCREENSHOT = class:^(org\.kde\.spectacle|flameshot|Hyprshot|hyprshot|peek|SimpleScreenRecorder)$

# 音频工具（混音、路由、声效）
$MIXERS = class:^(pavucontrol|Helvum|helvum|qpwgraph|EasyEffects|com\.github\.wwmm\.easyeffects|qjackctl)$

# 通用 portal 对话框（打开/保存/屏幕分享等）
$PORTAL = class:^(xdg-desktop-portal-gtk|xdg-desktop-portal-wlr)$

########################################
# 1) 主窗口默认平铺（不打扰平铺布局）
########################################
windowrulev2 = tile, $PLAYERS
windowrulev2 = tile, $MUSIC
windowrulev2 = tile, $OBS
# 图片查看器更像“临时预览”，默认做浮动（见第 2 节）。若你想它平铺，改为：
# windowrulev2 = tile, $IMG_VIEW

#########################################################
# 2) 图片查看器 / 预览：浮动 + 保例 + 居中（不强制尺寸）
#########################################################
windowrulev2 = float,           $IMG_VIEW
windowrulev2 = keepaspectratio, $IMG_VIEW
windowrulev2 = center,          $IMG_VIEW
# 可选：固定一个常用尺寸（比如 1280x800）
# windowrulev2 = size 1280 800, $IMG_VIEW

#########################################################
# 3) 视频/音乐的“对话框/属性/设置”：浮动 + 居中 + 轻动画
#########################################################
windowrulev2 = float,  $PLAYERS, title:^(?i).*(open|save|preferences|settings|about|属性|设置|关于|打开|保存).*
windowrulev2 = center, $PLAYERS, title:^(?i).*(open|save|preferences|settings|about|属性|设置|关于|打开|保存).*
windowrulev2 = noanim, $PLAYERS, title:^(?i).*(open|save|preferences|settings|about|属性|设置|关于|打开|保存).*

windowrulev2 = float,  $MUSIC,   title:^(?i).*(preferences|settings|about|equalizer|均衡器|设置|关于).*
windowrulev2 = center, $MUSIC,   title:^(?i).*(preferences|settings|about|equalizer|均衡器|设置|关于).*
windowrulev2 = noanim, $MUSIC,   title:^(?i).*(preferences|settings|about|equalizer|均衡器|设置|关于).*

#########################################################
# 4) 录屏/截图工具：小窗化，不要打断操作
#########################################################
# 截图类通常是短暂窗口：浮动 + 居中 + 取消动画；避免“抢焦点”
windowrulev2 = float,    $SCREENSHOT
windowrulev2 = center,   $SCREENSHOT
windowrulev2 = noanim,   $SCREENSHOT
windowrulev2 = nofocus,  $SCREENSHOT
# OBS 主窗保持平铺（上面已设为 tile）；其向导/设置小窗同样浮动
windowrulev2 = float,  $OBS, title:^(?i).*(settings|preferences|about|properties|设置|首选项|关于|属性|向导).*
windowrulev2 = center, $OBS, title:^(?i).*(settings|preferences|about|properties|设置|首选项|关于|属性|向导).*
windowrulev2 = noanim, $OBS, title:^(?i).*(settings|preferences|about|properties|设置|首选项|关于|属性|向导).*

#########################################################
# 5) 音频工具（混音/路由/声效）：浮动 + 居中（面板型）
#########################################################
windowrulev2 = float,  $MIXERS
windowrulev2 = center, $MIXERS
# 可选：给面板固定一个舒适尺寸（按需放开）
# windowrulev2 = size 1100 720, $MIXERS
# 面板类减少干扰：不做模糊与阴影（按需放开）
# windowrulev2 = noblur,   $MIXERS
# windowrulev2 = noshadow, $MIXERS

#########################################################
# 6) Portal 对话框（打开/保存/屏幕分享选择）：统一浮动
#########################################################
windowrulev2 = float,  $PORTAL
windowrulev2 = center, $PORTAL
windowrulev2 = noanim, $PORTAL

#########################################################
# 7) 体验优化：视频播放时防休眠、减少特效（可选）
#########################################################
# 播放器聚焦或全屏时禁止系统闲置休眠
windowrulev2 = idleinhibit focus,      $PLAYERS
windowrulev2 = idleinhibit fullscreen, $PLAYERS
# 全屏观看更干净：去模糊/阴影（若你常看视频可放开）
# windowrulev2 = noblur,   $PLAYERS
# windowrulev2 = noshadow, $PLAYERS

#######################################################################
# 提示：
# - 想确认具体类名/标题：运行 `hyprctl clients` 查看 `class:`、`title:`
# - 若出现误命中或新增应用，把类名补进上面集合即可
# - 与其它 apps/*.conf 无顺序耦合；若冲突，后载入者覆盖先载入者
#######################################################################

