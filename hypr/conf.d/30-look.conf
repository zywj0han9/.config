#######################################################################
# Hyprland 外观与动画配置文件（look.conf）
# 优化目标：高性能系统 (i7-12700K + TITAN Xp + 4K@1.5x)
# 策略：充分利用硬件性能，打造流畅且精美的视觉效果
#######################################################################

############################
### 🧱 GENERAL 外观基础 ###
############################

general {
    # === 窗口间距（4K 屏适配）===
    gaps_in  = 4           # 内间距：4K 下 2px 太小，4px 更舒适
    gaps_out = 8           # 外间距：与高分屏比例协调

    # === 边框（4K 优化）===
    border_size = 2        # 4K@1.5x 下 2px 边框清晰且不臃肿

    # 渐变绿色边框：更鲜艳的配色（充分利用色域）
    # 青绿->蓝紫渐变
	col.active_border = rgba(00ff99ff) rgba(00ddffff) rgba(00aaffff) rgba(0077ffff) 45deg
	# 经典彩虹渐变  红→橙→黄→绿→蓝→紫（垂直渐变）
    #col.active_border = rgba(ff0000ff) rgba(ff7700ff) rgba(ffff00ff) rgba(00ff00ff) rgba(0000ffff) rgba(ff00ffff) 90deg
	# 赛博朋克风（霓虹粉+青）
	#col.active_border = rgba(ff006eff) rgba(00f0ffff) 45deg
    # 日落渐变（橙→粉→紫）
	#col.active_border = rgba(ff6b35ff) rgba(f72585ff) rgba(7209b7ff) 45deg
	# 矩阵绿
	#col.active_border = rgba(00ff66ff) rgba(00ffaaff) rgba(00ff66ff) 45deg
	# 冰霜蓝（冷色调）
	#col.active_border = rgba(4cc9f0ff) rgba(4361eeff) rgba(7209b7ff) 45deg
	# 火焰红（暖色调）
	#col.active_border = rgba(ff0a54ff) rgba(ff477eff) rgba(ff5400ff) 45deg

    col.inactive_border = rgba(595959aa)  # 提高亮度，避免过暗

    resize_on_border = true   # 高分屏下边框拖拽更精准，建议启用
    allow_tearing    = false  # TITAN Xp 性能充足，无需撕裂
    layout = dwindle
}

######################################
### 🎨 DECORATION 圆角、阴影与模糊 ###
######################################

decoration {
    # === 圆角设置 ===
    rounding = 12  # 4K 下 10px 偏小，12px 更柔和

    # === 透明度（利用 GPU 合成能力）===
    active_opacity   = 1.0
    inactive_opacity = 0.96  # 轻微透明度，增强层次感

    # === 阴影（TITAN Xp 可负担更强阴影）===
    shadow {
        enabled      = true
        range        = 20              # 大幅提升范围（默认 4 太保守）
        render_power = 3               # 保持 3 即可，过高收益递减
        color        = rgba(1a1a1aee)  # 加深不透明度（aa→ee）
        offset       = 0 4             # 增加垂直偏移，更立体
    }

    # === 模糊（强化背景模糊效果）===
    blur {
        enabled          = true
        size             = 8       # 从 3 提升到 8（更强模糊）
        passes           = 2       # 双通道模糊（质量明显提升）
        vibrancy         = 0.2     # 微调色彩渗透
        ignore_opacity   = true    # 性能优化：忽略不透明窗口
        new_optimizations = true   # 新算法更高效
        xray             = false   # 保持默认
        noise            = 0.02    # 添加轻微噪点，避免色带
        contrast         = 1.0     # 对比度增强
        brightness       = 1.0     # 亮度保持
        popups           = true    # 弹窗也模糊
        popups_ignorealpha = 0.6   # 弹窗模糊阈值
    }

    # === 调光（可选：非聚焦窗口变暗）===
    dim_inactive = true
    dim_strength = 0.05  # 轻微调光（0.05 不影响可读性）
    dim_special  = 0.3   # special workspace 调暗更多
}

##########################################
### 🌀 ANIMATIONS 窗口与工作区动画效果 ###
##########################################

animations {
    enabled = yes

    # === 优化的贝塞尔曲线（更流畅）===
    bezier = overshot,        0.05, 0.9,  0.1,  1.05  # 轻微回弹
    bezier = smoothOut,       0.36, 0,    0.66, -0.56 # 平滑退出
    bezier = smoothIn,        0.25, 1,    0.5,  1     # 平滑进入
    bezier = linear,          0,    0,    1,    1     # 线性
    bezier = easeOutCubic,    0.33, 1,    0.68, 1     # 快速启动
    bezier = workspaceSmooth, 0.13, 0.99, 0.29, 1.0  # 工作区专用
    bezier = quickZoom,       0.25, 0.46, 0.45, 0.94 # 快速缩放
    bezier = md3_decel,       0.05, 0.7,  0.1,  1.0  # Material Design
    bezier = zoomOut,         0.16, 1,    0.3,  1    # 缩放专用

    # === 全局动画（加快响应速度）===
    animation = global, 1, 3, default

    # === 边框动画（瞬时响应）===
    animation = border, 1, 2, easeOutCubic

    # === 窗口动画（流畅且快速）===
    animation = windows,    1, 4, overshot,  slide
    animation = windowsIn,  1, 4, overshot,  slide
    animation = windowsOut, 1, 3, smoothOut, slide
    animation = windowsMove, 1, 4, overshot, slide

    # === 淡入淡出（快速切换）===
    animation = fadeIn,  1, 3, smoothIn
    animation = fadeOut, 1, 3, smoothOut
    animation = fade,    1, 3, smoothOut

    # === 图层动画（状态栏/通知等）===
    animation = layers,       1, 3, easeOutCubic
    animation = layersIn,     1, 3, smoothIn,  fade
    animation = layersOut,    1, 3, smoothOut, fade
    animation = fadeLayersIn,  1, 3, smoothIn
    animation = fadeLayersOut, 1, 3, smoothOut

    # === 工作区切换（快速平滑）===
    animation = workspaces,    1, 3.5, quickZoom, slidefade 18%
    animation = workspacesIn,  1, 3.5, quickZoom, slidefade 18%
    animation = workspacesOut, 1, 3.5, quickZoom, slidefade 18%
    
    # === Special Workspace 动画 ===
    animation = specialWorkspace, 1, 4, overshot, slidefadevert -50%
}

########################################
### 🧩 LAYOUTS AND MISC 布局与杂项 ###
########################################

# === dwindle 布局 ===
dwindle {
    pseudotile           = true
    preserve_split       = true
    smart_split          = false
    smart_resizing       = true
    force_split          = 0
    split_width_multiplier = 1.0
    default_split_ratio  = 1.0   # 默认分割比例
}

# === master 布局 ===
master {
    new_status           = master
    new_on_top           = false
    mfact                = 0.55
    orientation          = left
    inherit_fullscreen   = true
    smart_resizing       = true
    drop_at_cursor       = true
}

# === 杂项选项 ===
misc {
    force_default_wallpaper = -1
    disable_hyprland_logo   = true
    disable_splash_rendering = true
    
    # === 性能优化（高端配置）===
    vfr = true   # 可变刷新率：桌面待机省电，动画全速
    vrr = 1      # 始终启用 G-SYNC/FreeSync（TITAN Xp 支持）
    
    # === 动画优化（流畅优先）===
    animate_manual_resizes      = true   # 手动调整也要动画（流畅体验）
    animate_mouse_windowdragging = true  # 鼠标拖动动画（高刷屏下很丝滑）
    
    # === 焦点行为 ===
    mouse_move_enables_dpms = true
    key_press_enables_dpms  = true
    focus_on_activate       = false
    
    # === 渲染优化 ===
    disable_autoreload = false
    
    # === 窗口吞噬（终端启动 GUI 时隐藏终端）===
    enable_swallow   = true
    swallow_regex    = ^(kitty|Alacritty|foot)$
    swallow_exception_regex = ^(wev)$
    
    # === 工作区行为 ===
    middle_click_paste = true
}

# === Cursor 光标设置 ===
cursor {
    no_hardware_cursors = false  # TITAN Xp 无需软件光标
    no_warps            = false
    hide_on_key_press   = false
    inactive_timeout    = 0
    enable_hyprcursor   = true   # 启用 Hyprland 原生光标主题
}

# === XWayland 设置 ===
xwayland {
    force_zero_scaling = true  # 防止模糊
}

#######################################################################
# 🎯 针对 4K@1.5x + TITAN Xp 的优化说明：
#
# 1. 模糊效果：size=8 + passes=2 是甜蜜点，TITAN Xp 轻松应对
# 2. 阴影范围：range=20 在 4K 下比例合适，不会过大
# 3. VRR：启用自适应同步，消除撕裂（60Hz 固定刷新）
# 4. 动画：使用 overshot 曲线增加微妙回弹，更生动
# 5. 间距：gaps_out=8 在 27" 4K 屏上视觉比例舒适
# 6. 调光：dim_strength=0.05 微弱到几乎不可察觉，仅增强层次
#
# 🔧 性能监控：
# - 查看 FPS: hyprctl debug fps
# - 查看渲染统计: hyprctl debug renderinfo
#
# 💡 如需极致性能（游戏时）：
# - 创建 performance-mode.conf 禁用模糊/阴影/动画
# - 用 hyprctl keyword 临时切换
#
# 编辑后执行：hyprctl reload
#######################################################################
